What is load balancing?
    Load balancers are servers that forward internet traffic to multiple servers(EC2 instances) downstream.

Why we should use load balancer?
    Spread load across multiple downstream instances.
    Expose a single point of access(DNS) to our application.
    Simlessly handles failures of downstream instances.
    Do regular healthcheck to our instances.
    Provides SSL termination (HTTPS) to our websites.
    Enforce stickness with cookies.
    High availability across zones.
    Seperate public traffic from private traffic.

Why use an EC2 load balancer?
    An ELB(EC2 Load balancer) is a managed load balancer.
     . AWS gurantees that it will be working.
     . AWS takes care of upgrade, maintenance and high availability.
     . AWS provides only few configuration knobs.

It cost less to setup our own load balancer.

It is integrated with many AWS offerings/services.


Health Checks:
    Health checks are crucial to load balancer.
    They enable load balancer to know if the instances it forwards traffic to are availabil to reply to requests.
    Health checks is done on a port and route.
    If the response is not 200% (OK) then the instance is unhealthy.

                                 Health Checks
    Classic Load Balancer ---------------------------- EC2 instance
                                   Port 4567
                                   route/health
                                   
                                   
 -------------------------------------------------------------------------------------------------------------------------------------------------------------------            
            
            
 Elastic Load Balancer Stickiness:
    It is pissible to implement stickiness so that the same client is always redirected to the same instance behind a load balancer.
    
    This works for Classic and Application load balancer.
    
    The "cookie" used for stickiness has an expiration date that we control.
    
    Use Case: Make sure that user don't lose his session data.
    
    Enabling stickness may bring imbalance to the load over the backend EC2 instances.
    
    
    
                          Client A        Client B       Client C
                              \\             |            //
                               \\            |           //
                                \\           |          //
                                 \\          |         //
                                  \\         |        //
                                   \\  _____________ //
                                      |Load Balancer|
                                       --------------
                                     //             \\
                                    //               \\
                                   //                 \\
                                  //                   \\
                                 //                     \\
                          EC2 Instance              EC2 Instance    
                       
                       
 When the stickness is not active the IP of the instance which is running keeps on changing as it redirects to another instance in the target groups.
 
 When the stickness is active we can set the instance IP duration accordingly until the cookie expires which then redirects to another instance in the target group.
 
 
 ------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 
 
 Elastic Load Balancer - Cross-Zone Load Balancing:
    With Cross Zone Load balancing, each load balancer distributes evenly across all registered instances in all AZ.
    
    Otherwise, each load balancer node distributes request evenly across the registered instances in it's availability zone only.
    
    
    
Classic Load Balancer:
    In classicl load balancer, cross-zone load balancing is disabled by default.
    No charges for inter AZ data if enabled.
    
    
    
Application Load balancer:
    In application load balancer, cross-zone load balancing is always enabled and can't be disaled.
    No charges for inter AZ data.
    
    
    
 Network Load Balancer:
    In network load balancer, cross-zones is disabled by default.
    Charges are applicable ($) for inter AZ if enabled.
    
    
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------    

Elastic Load Balancer - SSL Certificate:

    SSL/TLS - Basics:
        An SSL certificate allows traffic between your client and your load balancer to be encrypted in transit (in-flight encryption).
        
        SSL refers to Secure Sockets Layer, used to encrytp connections.
        TLS refers to Transport Layer Security which is a neweer version.
        Nowadays, TLS cerfificated are mainly used but people still refe SSL.
        
        Public SSL are issued by certified authorities(CA).
        Comodo, Symantec,GoDaddy, etc.
        
        SSL certificate has an expiration date and must be renewed.
        
                                            
Load Balancer - SSL                        ---------------------------                         ---------------------
                      HTTPS encrypted      |                          |                        |                    |
                      over www             |                          |  HTTP Over Private VPC |                    |                    
                 ------------------------- |                          |------------------------|                    |
         Users   ------------------------- |     Load Balancer        |------------------------|    EC2 Instance    |
                                           |                          |                        |                    |
                                           |                          |                        |                    |
                                           ---------------------------                         ----------------------
